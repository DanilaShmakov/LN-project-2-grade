<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>
        Установка
    </title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="main/css.css">
</head>

<body>
    <nav class="navbar navbar-dark sticky-top bg-dark navbar-expand-md">
        <a href="index.html" class="navbar-brand pl-5">
            <img src="source/lightning_PNG52.png" class="hover" alt="">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Домой</a>
                </li>
                <li class="nav-item">
                    <a href="about.html" class="nav-link">Об LN</a>
                </li>
                <li class="nav-item">
                    <a href="download.html" class="nav-link">Установка ноды</a>
                </li>
                <li class="nav-item">
                    <a href="apps.html" class="nav-link">Обзор приложений</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="jumbotron">
        <div class="container text-light">
            <h1>Установка ноды</h1>
        </div>
    </div>
    <div class="container">
        <div class="card">
            <div class="card-header text-center">Инструкция для запуска C-lightning на Linux</div>
            <ul class="list-group">
                <li class="list-group-item">
                    <p>Установка ноды на Linux это <b>абсолютно ненужное занятие</b> для новичка в сфере ЛН, 
                        так как потраченные силы не будут стоить результата. 
                        Гораздо легче пользоваться мобильным приложением, 
                        некоторые из которых мы тоже рассмотрим.
                        Но если вы знаете зачем вам это нужно, то специально для вас наша команда 
                        решила разобраться в этом деле и установить одну из популярных 
                        реализаций ЛН ноды "C-lightning".
                    </p>
                </li>
                <li class="list-group-item">
                    <p> Для работы с c-lightning нужно установить и запустить bitcoind:</p>
                    <ul class="list-unstyled">
                        <li class="pl-4"><b>$</b> sudo apt-get install build-essential</li>
                        <li class="pl-4"><b>$</b> sudo apt-get install libtool autotools-dev autoconf</li>
                        <li class="pl-4"><b>$</b> sudo apt-get install libssl-dev</li>
                        <li class="pl-4"><b>$</b> sudo apt-get install libboost-all-dev</li>
                        <li class="pl-4"><b>$</b> sudo add-apt-repository ppa:bitcoin/bitcoin</li>
                        <li class="pl-4"><b>$</b> sudo apt-get update</li>
                        <li class="pl-4"><b>$</b> sudo apt-get install bitcoind</li>
                        <li class="pl-4"><b>$</b> mkdir ~/.bitcoin/ && cd ~/.bitcoin/</li>
                        <li class="pl-4"><b>$</b> nano bitcoind.conf</li>
                    </ul>
                </li>
                <li class="list-group-item">
                    <p>Записываем в файл bitcoind.conf:</p>
                    <ul class="list-unstyled">
                        <li class="pl-4">rpcuser=username</li>
                        <li class="pl-4">rpcpassword=password</li>
                        <li class="pl-4">testnet=0</li>
                        <li class="pl-4">rpcport=8332</li>
                        <li class="pl-4">rpcallowip=127.0.0.1</li>
                        <li class="pl-4">rpcallowip=195.154.11.93</li>
                        <li class="pl-4">server=1</li>
                        <li class="pl-4">prune=550</li>
                    </ul>
                    <p>Последняя строка нужна для запуска в сокращенном виде. Однако из-за неё могут возникнуть конфликты так как 
                    c-lightning поддерживает работу в этом режиме частично</p>
                </li>
                <li class="list-group-item">
                    <p>Можно запускать биткоин узел. При запуске он будет синхронизироватся с сетью 
                        скачивая новые блоки и отбрасывая ненужные. У нас это заняло 2 дня и 8 гигабайт места</p>
                    <p>После того, как все блоки скачаются можно устанавливать c-lightning:
                    </p>
                    <ul class="list-unstyled">
                        <li class="pl-4"><b>$</b> sudo apt-get install -y software-properties-common</li>
                        <li class="pl-4"><b>$</b> sudo add-apt-repository -u ppa:lightningnetwork/ppa</li>
                        <li class="pl-4"><b>$</b> sudo apt-get install lightningd</li>
                    </ul>
                </li>
                <li class="list-group-item">
                    <p>Далее один раз вводим следующие команды для правильного создания папки .lightning в домашней директории:</p>
                    <ul class="list-unstyled">
                        <li class="pl-4"><b>$</b> lightningd --network=bitcoin --log-level=debug</li>
                        <li class="pl-4">нажимаем ctrl+z и убиваем процесс lightningd</li>
                        <li class="pl-4"><b>$</b> nano ~/.lightning/config</li>
                    </ul>
                </li>
                <li class="list-group-item">
                    <p>Записываем в файл config:</p>
                    <ul class="list-unstyled">
                        <li class="pl-4">network=bitcoin</li>
                        <li class="pl-4">log-level=debug</li>
                        <li class="pl-4">addr=0.0.0.0:9735</li>
                        <li class="pl-4">bitcoin-rpcuser=username_as_bitcoin_rpc</li>
                        <li class="pl-4">bitcoin-rpcpassword=password_as_bitcoin_rpc</li>
                    </ul>
                </li>
                <li class="list-group-item">
                    <p>После того как всё скачается, для запуска и проверки состояния lightningd и bitcoind используются следующие команды:</p>
                    <ul class="list-unstyled">
                        <li class="pl-4">Запустить биткоин узел: <b>$</b> bitcoind -daemon</li>
                        <li class="pl-4">Выключить биткоин узел: <b>$</b> bitcoin-cli stop</li>
                        <li class="pl-4">Вывод информации о биткоин узле: <b>$</b> bitcoin-cli getblockchaininfo</li>
                        <li class="pl-4">Включить ЛН ноду: <b>$</b> lightningd --daemon</li>
                        <li class="pl-4">Вывести информацию о ней: <b>$</b> lightning-cli getinfo</li>
                        <li class="pl-4">Выключить ЛН ноду: <b>$</b> lightning-cli getinfo</li>
                    </ul>
                </li>
                <li class="list-group-item">
                    <p>Вот мы и установили всё необходимое, однако мы не сможем принимать и отправлять средства без канала. 
                        Чтобы его создать нужно сделать следующее:
                        <br>1) Подключиться к другому узлу для синхронизации графа канала
                        <br>2) Сгенерировать адрес и отправить на него несколько биткойнов. Используйте $ lightning-cli listfunds для проверки
                        <br>3) Открыть канал
                        <br>Соответствующие команды:
                    </p>
                    <ul class="list-unstyled">
                    <li class="pl-4">1) <b>$</b> lightning-cli connect node_id@ip:port</li>
                    <li class="pl-4">2) <b>$</b> lightning-cli newaddr p2sh-segwit</li>
                    <li class="pl-4">3) <b>$</b> lightning-cli fundchannel node_id amount_in_satoshis </li>
                    </ul>
                </li>



            </ul>
        </div>
    </div>
    <br><br>
    <footer class="footer fixed-bottom py-3 bg-dark text-white-50">
        <div class="container text-center">
            <small>Copyright &copy; 181-351 LN Project</small>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>
